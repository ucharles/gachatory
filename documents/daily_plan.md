# 할 일

- 라즈베리파이에 외부 저장장치 연결하기 (이미지 서버용)
- tailwindcss로 레이아웃 꾸미기
  - 상품 Card 컴포넌트 만들기
- 검색창의 상품들을 날짜순(내림차순)으로 정렬
- DB에 이미지 주소는 있는데 이미지 서버에는 파일이 없는 경우를 찾아서 업데이트 혹은 알림
  - DB 전수 검사 (약 1만 건)
- 번역기 파이프라인 추가 (deepL API를 구매해야 함)
- 고치기: 검색 페이지에서 페이지네이션을 할 때 페이지의 최상단으로 이동하지 않음
  - 정확한 원인을 모르겠음. 캐시인가?
- gachatory readme 작성
- 번역 API를 사용하는 ts 파일과 코드 정리

# 떠오른 일

- 메일링 서비스
  - 신상품이 DB에 추가되면 키워드 알림으로 메일을 보내주는 건 구현하고 싶다.
  - GPT에 물어보니 여러 주의점이 있지만 메일링 서비스를 사용하라고 한다.
  - Amazon SES가 가장 저렴한듯. 메일 2만 통에 2달러.

# 2023-09-07 ~ 2023-09-08

- nginx + HTTPS + Docker로 Next.js와 이미지 서버 배포

# 2023-09-03

- 사이트 chappy에서 스크래핑하는 코드를 추가
  - 발빠른 정보 수집을 위한 것
  - 이미지 저장은 라즈베리파이에 외부 저장장치 연결 후에 시도하기로
- 라즈베리파이에 외부 저장장치 연결하기 위한 장치 구매
  - 강원전자 NETmate USB 3.0 to SATA3 컨버터 (NM-KP01C)
- 검색 결과와 상세 페이지의 fetch에 캐시 적용 (5분)
  - 가독성을 위해 enum을 작성함
  - 관련 내용: https://nextjs.org/docs/app/building-your-application/caching#revalidating-1
  - 데이터 갱신 주기는 24시간이고 그 시점은 0시라 더 늘려도 될지도
  - 나중에 좋아요 등이 추가되면 1시간이 타당한 것 같다. 지금은 테스트용이라 5분

# 2023-09-02

- 메인 페이지 (이번달 신상) 무한 스크롤 적용
  - 참고: https://github.com/Raveenrathnaraj/Rex-Anime
  - 문제: 상세 페이지 탐색 후 뒤로가기를 하면 목록 보존이 안되어서 이전 상태로 롤백
    1. 제일 위에 있는 내용은 마지막으로 불러왔던 데이터
    2. 아래에 표시되는 데이터는 1번과는 상관 없이 페이지 2, 페이지 3을 불러옴
    3. (마지막으로 불러왔던 목록) - 2 - 3 - ...
  - 의도한 움직임을 생각해보자
    1. 뒤로가기를 하면 페이지 상태가 보존되어 있음
    2. 여태 로드했던 데이터 + 마지막으로 불러왔던 리스트의 인덱스를 저장할 필요 있음
    3. 스크롤 위치를 보존해야 한다
    4. 참고: https://ux.stackexchange.com/questions/72693/navigating-back-to-previous-location-in-infinitely-scrolling-page

# 2023-08-31

- crontab 스케줄러 동작 확인 완료. 정상 작동 중
- tailwindcss로 레이아웃 꾸미기
  - navbar
  - footer
  - 메인 페이지
  - 검색 페이지
  - 상세 페이지

# 2023-08-30

- 라즈베리파이의 리눅스 우분투 서버에 업로드 후 구동 확인, 매일 0시에 스케줄링 설정
- 코드들 Git에 업로드 하기 (코드 정리가 필요하다)

# 2023-08-29

- 반다이 가샤퐁 파이프라인 구성 완료
  - 해당 함수들의 명칭을 가독성있게 수정
  - 여태 흘러가는대로 개발하다 마지막에 정리하려니 기억이 나질 않아 메모하며 정리함
  - 추후 서버 구동을 위해 출력 파일은 폴더 안에 들어가도록 구성
- 스케줄 교집합 로직에 대한 포스트 작성(까먹기 전에...)
  - https://marshmelona.tistory.com/27

# 2023-08-28

- **함수 정리**
  - daily_scraping.py 등 여기저기 흩어져 있던 공통 함수를 utils 폴더로 이동시킴
- **Google Image Search 개발 시도**
  - Selenium을 이용하여 구글에서 이미지 검색 후, 첫 번째 이미지를 가져오는 것은 성공
  - 하지만 검색 결과가 정확하지 않아 인간의 도움이 필요했음
  - 키워드를 추가하거나, 검색되는 사이트를 제한하거나 해도 결과는 만족스럽지 못함
  - 다른 좋은 방법이 있을까 고민해 보기로
